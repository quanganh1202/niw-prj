function is_utf8(a){strlen=a.length;for(i=0;i<strlen;i++){ord=a.charCodeAt(i);if(ord<128)continue;else if((ord&224)===192&&ord>193)n=1;else if((ord&240)===224)n=2;else if((ord&248)===240&&ord<245)n=3;else return false;for(c=0;c<n;c++)if(++i===strlen||(a.charCodeAt(i)&192)!==128)return false}return true}function utf8_encode(a){a=a.replace(/\r\n/g,"\n");utf8str="";for(n=0;n<a.length;n++){c=a.charCodeAt(n);if(c<128){utf8str+=String.fromCharCode(c)}else if(c>127&&c<2048){utf8str+=String.fromCharCode(c>>6|192);utf8str+=String.fromCharCode(c&63|128)}else{utf8str+=String.fromCharCode(c>>12|224);utf8str+=String.fromCharCode(c>>6&63|128);utf8str+=String.fromCharCode(c&63|128)}}return utf8str}function hideButtons(){window.clearTimeout(showButtonsTimeout);document.getElementById("theBirdLtweet").style.display="none";document.getElementById("theBirdLtweet").style.opacity="0";document.getElementById("theBirdLtweet").style.filter="alpha(opacity=0)";document.getElementById("theBirdLfollow").style.display="none";document.getElementById("theBirdLfollow").style.opacity="0";document.getElementById("theBirdLfollow").style.filter="alpha(opacity=0)"}function showButtons(a,b){birdPosY=parseInt(document.getElementById("theBird").style.top);birdPosX=parseInt(document.getElementById("theBird").style.left);if(a==0&&document.getElementById("theBirdLtweet").style.display=="block")a=100;if(birdIsFlying)a=0;opacity=Math.round(a*15);if(opacity<0)opacity=0;if(opacity>100)opacity=100;if(birdPosX<b-300||birdPosX<b/2){buttonPosX1=birdPosX+spriteWidth-15;buttonPosX2=birdPosX+spriteWidth-10}else{buttonPosX1=birdPosX+16-parseInt(document.getElementById("theBirdLtweet").style.width);buttonPosX2=birdPosX+11-parseInt(document.getElementById("theBirdLfollow").style.width)}buttonPosY1=birdPosY-4;buttonPosY2=birdPosY-4+parseInt(document.getElementById("theBirdLtweet").style.height);document.getElementById("theBirdLtweet").style.left=buttonPosX1+"px";document.getElementById("theBirdLtweet").style.top=buttonPosY1+"px";document.getElementById("theBirdLtweet").style.display="block";document.getElementById("theBirdLtweet").style.opacity=opacity/100;document.getElementById("theBirdLtweet").style.filter="alpha(opacity="+opacity+")";document.getElementById("theBirdLfollow").style.left=buttonPosX2+"px";document.getElementById("theBirdLfollow").style.top=buttonPosY2+"px";document.getElementById("theBirdLfollow").style.display="block";document.getElementById("theBirdLfollow").style.opacity=opacity/100;document.getElementById("theBirdLfollow").style.filter="alpha(opacity="+opacity+")";if(opacity>=100)return;a++;showButtonsTimeout=window.setTimeout("showButtons("+a+","+b+")",60)}function scareTheBird(a){newTS=(new Date).getTime();if(scareTheBirdLastTime<newTS-scareTheBirdTime){scareTheBirdCount=1;scareTheBirdLastTime=newTS}else{scareTheBirdCount++;if(scareTheBirdCount>=scareTheBirdMouseOverTimes){scareTheBirdCount=0;scareTheBirdLastTime=0;recheckposition(true)}}}function flyFromTo(a,b,c,d,e,f){justStarted=e==0;e+=e>birdSpeed/2?birdSpeed:Math.round(e==0?birdSpeed/4:birdSpeed/2);solvedFuture=e+(e>birdSpeed/2?birdSpeed:Math.round(birdSpeed/2));distanceX=c-a;distanceY=d-b;distance=Math.sqrt(distanceX*distanceX+distanceY*distanceY);solvPerc=Math.abs(1/distance*e);solvDistX=Math.round(distanceX*solvPerc);solvDistY=Math.round(distanceY*solvPerc);solvPercFuture=Math.abs(1/distance*solvedFuture);solvDistXFuture=Math.round(distanceX*solvPercFuture);solvDistYFuture=Math.round(distanceY*solvPercFuture);if(typeof f!="string"){f=null;angle=(distanceX!=0?Math.atan(-distanceY/distanceX)/Math.PI*180:90)+(distanceX<0?180:0);if(angle<0)angle+=360;if(angle<45)f="o";else if(angle<135)f="n";else if(angle<202.5)f="w";else if(angle<247.5)f="sw";else if(angle<292.5)f="s";else if(angle<337.5)f="so";else f="o"}if(Math.abs(solvDistXFuture)>=Math.abs(distanceX)&&Math.abs(solvDistYFuture)>=Math.abs(distanceY)){animateSpriteAbort();switch(f){case"so":animateSprite(1,0,0,0,null,true);break;case"sw":animateSprite(1,2,2,0,null,true);break;case"s":animateSprite(0,2,2,0,null,true);break;case"n":animateSprite(4,0,0,0,null,true);break;case"o":animateSprite(1,0,0,0,null,true);break;case"w":animateSprite(1,2,2,0,null,true);break;default:animateSprite(0,0,0,0,null,true)}timeoutAnimation=window.setTimeout("animateSprite(0,0,0,0,null,true)",spriteAniSpeed)}if(Math.abs(solvDistX)>=Math.abs(distanceX)&&Math.abs(solvDistY)>=Math.abs(distanceY)){solvDistX=distanceX;solvDistY=distanceY;birdIsFlying=false;window.setTimeout("recheckposition()",500)}else{if(justStarted){animateSpriteAbort();switch(f){case"so":animateSprite(1,0,0,0,null,true);timeoutAnimation=window.setTimeout("animateSprite(1,1,1,0,null,true)",spriteAniSpeed);break;case"sw":animateSprite(1,2,2,0,null,true);timeoutAnimation=window.setTimeout("animateSprite(1,3,3,0,null,true)",spriteAniSpeed);break;case"s":animateSprite(0,2,2,0,null,true);timeoutAnimation=window.setTimeout("animateSprite(0,3,3,0,null,true)",spriteAniSpeed);break;case"n":timeoutAnimation=window.setTimeout("animateSprite(4,0,3,0,"+spriteAniSpeedSlow+")",1);break;case"o":animateSprite(1,0,0,0,null,true);timeoutAnimation=window.setTimeout("animateSprite(2,0,3,0,"+spriteAniSpeedSlow+")",spriteAniSpeed);break;case"w":animateSprite(1,2,2,0,null,true);timeoutAnimation=window.setTimeout("animateSprite(3,0,3,0,"+spriteAniSpeedSlow+")",spriteAniSpeed);break;default:animateSprite(0,0,0,0,null,true)}}timeoutFlight=window.setTimeout("flyFromTo("+a+","+b+","+c+","+d+","+e+",'"+f+"')",50)}hideButtons();document.getElementById("theBird").style.left=a+solvDistX+"px";document.getElementById("theBird").style.top=b+solvDistY+birdSetUp+"px"}function chooseNewTarget(){var a=new Array;var b=scrollPos+spriteHeight+birdSpaceVertical;var c=scrollPos+windowHeight-birdSpaceVertical;for(var d=0;d<targetElems.length;d++){var e=targetElems[d];var f=document.getElementsByTagName(e).length;for(var g=0;g<f;g++){var h=document.getElementsByTagName(e)[g].offsetTop;var i=document.getElementsByTagName(e)[g].offsetLeft;var j=document.getElementsByTagName(e)[g].offsetWidth;if(h<=b||h>=c||j<minElemWidth||i<0){continue}a[a.length]=new Array(e,g,h,i,j);if(a.length>=neededElems4random)return a}}return a}function recheckposition(a){if(a!=true)a=false;if(birdIsFlying)return false;if(typeof window.innerHeight=="number")windowHeight=window.innerHeight;else if(document.documentElement&&document.documentElement.clientHeight)windowHeight=document.documentElement.clientHeight;else if(document.body&&document.body.clientHeight)windowHeight=document.body.clientHeight;if(windowHeight<=spriteHeight+2*birdSpaceVertical)windowHeight=spriteHeight+2*birdSpaceVertical+1;if(typeof window.innerWidth=="number")windowWidth=window.innerWidth;else if(document.documentElement&&document.documentElement.clientWidth)windowWidth=document.documentElement.clientWidth;else if(document.body&&document.body.clientWidth)windowWidth=document.body.clientWidth;if(windowWidth<=spriteWidth)windowWidth=spriteWidth+1;if(typeof window.pageYOffset=="number")scrollPos=window.pageYOffset;else if(document.body&&document.body.scrollTop)scrollPos=document.body.scrollTop;else if(document.documentElement&&document.documentElement.scrollTop)scrollPos=document.documentElement.scrollTop;birdPosY=parseInt(document.getElementById("theBird").style.top);birdPosX=parseInt(document.getElementById("theBird").style.left);if(scrollPos+birdSpaceVertical>=birdPosY||scrollPos+windowHeight-spriteHeight<birdPosY||a){hideButtons();elemPosis=chooseNewTarget();if(elemPosis.length<1){elemType=null;elemNr=null;elemTop=scrollPos+Math.round(Math.random()*(windowHeight-spriteHeight));elemLeft=Math.round(Math.random()*(windowWidth-spriteWidth));elemWidth=0}else{newTarget=elemPosis[Math.round(Math.random()*(elemPosis.length-1))];elemType=newTarget[0];elemNr=newTarget[1];elemTop=newTarget[2];elemLeft=newTarget[3];elemWidth=newTarget[4]}targetTop=elemTop-spriteHeight;targetLeft=Math.round(elemLeft-spriteWidth/2+Math.random()*elemWidth);if(targetLeft>windowWidth-spriteWidth-24)targetLeft=windowWidth-spriteWidth-24;else if(targetLeft<0)targetLeft=0;birdIsFlying=true;flyFromTo(birdPosX,birdPosY,targetLeft,targetTop,0)}}function animateSpriteAbort(){window.clearTimeout(timeoutAnimation)}function animateSprite(a,b,c,d,e,f){if(typeof d!="number"||d>c-b)d=0;document.getElementById("theBird").style.backgroundPosition="-"+Math.round((b+d)*spriteWidth)+"px -"+spriteHeight*a+"px";if(f==true)return;if(typeof e!="number")e=spriteAniSpeed;timeoutAnimation=window.setTimeout("animateSprite("+a+","+b+","+c+","+(d+1)+","+e+")",e)}function tripleflapInit(a){if(typeof a=="undefined"){window.setTimeout("tripleflapInit(1)",250);return}if(!is_utf8(tweetThisText))tweetThisText=utf8_encode(tweetThisText);var b="http://itonline.vn/"+escape(tweetThisText);var c=document.createElement("a");c.setAttribute("id","theBird");c.setAttribute("href",twitterAccount);c.setAttribute("target","_blank");c.style.display="block";c.style.position="absolute";c.style.left=birdPosX+"px";c.style.top=birdPosY+"px";c.style.width=spriteWidth+"px";c.style.height=spriteHeight+"px";c.style.background="url('"+birdSprite+"') no-repeat transparent";c.style.backgroundPosition="-0px -0px";c.style.zIndex="999999";c.onmouseover=function(){scareTheBird();showButtonsTimeout=window.setTimeout("showButtons(0,"+windowWidth+")",400);window.clearTimeout(hideButtonsTimeout)};c.onmouseout=function(){hideButtonsTimeout=window.setTimeout("hideButtons()",50)};document.body.appendChild(c);var d=document.createElement("a");d.setAttribute("id","theBirdLtweet");d.setAttribute("href",b);d.setAttribute("target","_blank");d.setAttribute("title","Register here");d.style.display="none";d.style.position="absolute";d.style.left="0px";d.style.top="-100px";d.style.background="url('"+birdSprite+"') no-repeat transparent";d.style.opacity="0";d.style.filter="alpha(opacity=0)";d.style.backgroundPosition="-64px -0px";d.style.width="58px";d.style.height="30px";d.style.zIndex="951";d.onmouseover=function(){window.clearTimeout(hideButtonsTimeout)};d.onmouseout=function(){hideButtonsTimeout=window.setTimeout("hideButtons()",50)};document.body.appendChild(d);var e=d.cloneNode(false);e.setAttribute("id","theBirdLfollow");e.setAttribute("href",twitterAccount);e.setAttribute("title","follow me");e.style.backgroundPosition="-64px -30px";e.style.width="58px";e.style.height="20px";e.style.zIndex="952";e.onmouseover=function(){window.clearTimeout(hideButtonsTimeout)};e.onmouseout=function(){hideButtonsTimeout=window.setTimeout("hideButtons()",50)};document.body.appendChild(e);var f=window.setTimeout("animateSprite(0,0,0,0,null,true)",spriteAniSpeed);window.onscroll=recheckposition;recheckposition()}if(typeof twitterAccount!="string"||twitterAccount=="")var twitterAccount="http://twitter.com/";if(typeof tweetThisText!="string"||tweetThisText=="")var tweetThisText=document.title+" "+document.URL;var tweetthislink=null;var birdSpeed=12;var birdSpaceVertical=16;var birdSetUp=2;var spriteWidth=64;var spriteHeight=64;var spriteAniSpeed=72;var spriteAniSpeedSlow=Math.round(spriteAniSpeed*1.75);var neededElems4random=10;var minElemWidth=Math.round(spriteWidth/3);var scareTheBirdMouseOverTimes=4;var scareTheBirdTime=1e3;var birdIsFlying=false;var scrollPos=0;var windowHeight=450;if(typeof window.innerHeight=="number")windowHeight=window.innerHeight;else if(document.documentElement&&document.documentElement.clientHeight)windowHeight=document.documentElement.clientHeight;else if(document.body&&document.body.clientHeight)windowHeight=document.body.clientHeight;if(windowHeight<=spriteHeight+2*birdSpaceVertical)windowHeight=spriteHeight+2*birdSpaceVertical+1;var windowWidth=800;if(typeof window.innerWidth=="number")windowWidth=window.innerWidth;else if(document.documentElement&&document.documentElement.clientWidth)windowWidth=document.documentElement.clientWidth;else if(document.body&&document.body.clientWidth)windowWidth=document.body.clientWidth;if(windowWidth<=spriteWidth)windowWidth=spriteWidth+1;var birdPosX=Math.round(Math.random()*(windowWidth-spriteWidth+200)-200);var birdPosY=-2*spriteHeight;var timeoutAnimation=false;var timeoutFlight=false;var showButtonsTimeout=null;var hideButtonsTimeout=null;var scareTheBirdLastTime=0;var scareTheBirdCount=0